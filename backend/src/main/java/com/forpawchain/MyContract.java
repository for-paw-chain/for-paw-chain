package com.forpawchain;

import java.math.BigInteger;
import java.util.Arrays;
import java.util.Collections;
import java.util.HashMap;

import org.springframework.beans.factory.annotation.Value;
import org.web3j.abi.TypeReference;
import org.web3j.abi.datatypes.Function;
import org.web3j.abi.datatypes.Type;
import org.web3j.crypto.Credentials;
import org.web3j.protocol.Web3j;
import org.web3j.protocol.core.RemoteCall;
import org.web3j.protocol.core.methods.response.TransactionReceipt;
import org.web3j.tx.Contract;
import org.web3j.tx.TransactionManager;
import org.web3j.tx.gas.ContractGasProvider;

// https://github.com/web3j/web3j/issues/1710
public class MyContract extends Contract {

	private static String BINARY = "0x608060405234801561001057600080fd5b50611747806100206000396000f3fe608060405234801561001057600080fd5b50600436106100885760003560e01c8063c8691b2a1161005b578063c8691b2a1461013f578063cb54421214610174578063de8fa43114610190578063e2883a76146101ae57610088565b806312ff3be31461008d5780633129e773146100c15780635f2c43b0146100f2578063bfb231d21461010e575b600080fd5b6100a760048036038101906100a29190610dfa565b6101de565b6040516100b8959493929190610ef8565b60405180910390f35b6100db60048036038101906100d69190610dfa565b610464565b6040516100e9929190610f67565b60405180910390f35b61010c600480360381019061010791906110d3565b6105d2565b005b61012860048036038101906101239190610dfa565b610753565b604051610136929190610f67565b60405180910390f35b61015960048036038101906101549190610dfa565b610897565b60405161016b96959493929190611268565b60405180910390f35b61018e600480360381019061018991906112ec565b610c37565b005b610198610d07565b6040516101a59190611386565b60405180910390f35b6101c860048036038101906101c39190610dfa565b610d14565b6040516101d59190611386565b60405180910390f35b600181815481106101ee57600080fd5b9060005260206000209060060201600091509050806000018054610211906113d0565b80601f016020809104026020016040519081016040528092919081815260200182805461023d906113d0565b801561028a5780601f1061025f5761010080835404028352916020019161028a565b820191906000526020600020905b81548152906001019060200180831161026d57829003601f168201915b50505050509080600101805461029f906113d0565b80601f01602080910402602001604051908101604052809291908181526020018280546102cb906113d0565b80156103185780601f106102ed57610100808354040283529160200191610318565b820191906000526020600020905b8154815290600101906020018083116102fb57829003601f168201915b50505050509080600201805461032d906113d0565b80601f0160208091040260200160405190810160405280929190818152602001828054610359906113d0565b80156103a65780601f1061037b576101008083540402835291602001916103a6565b820191906000526020600020905b81548152906001019060200180831161038957829003601f168201915b5050505050908060030160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16908060050180546103e1906113d0565b80601f016020809104026020016040519081016040528092919081815260200182805461040d906113d0565b801561045a5780601f1061042f5761010080835404028352916020019161045a565b820191906000526020600020905b81548152906001019060200180831161043d57829003601f168201915b5050505050905085565b6060806000838154811061047b5761047a611401565b5b9060005260206000209060020201600001600084815481106104a05761049f611401565b5b90600052602060002090600202016001018180546104bd906113d0565b80601f01602080910402602001604051908101604052809291908181526020018280546104e9906113d0565b80156105365780601f1061050b57610100808354040283529160200191610536565b820191906000526020600020905b81548152906001019060200180831161051957829003601f168201915b50505050509150808054610549906113d0565b80601f0160208091040260200160405190810160405280929190818152602001828054610575906113d0565b80156105c25780601f10610597576101008083540402835291602001916105c2565b820191906000526020600020905b8154815290600101906020018083116105a557829003601f168201915b5050505050905091509150915091565b600033905060016040518060c001604052808781526020018681526020018581526020018373ffffffffffffffffffffffffffffffffffffffff168152602001600067ffffffffffffffff81111561062d5761062c610fa8565b5b60405190808252806020026020018201604052801561065b5781602001602082028036833780820191505090505b50815260200184815250908060018154018082558091505060019003906000526020600020906006020160009091909190915060008201518160000190816106a391906115dc565b5060208201518160010190816106b991906115dc565b5060408201518160020190816106cf91906115dc565b5060608201518160030160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055506080820151816004019080519060200190610733929190610d46565b5060a082015181600501908161074991906115dc565b5050505050505050565b6000818154811061076357600080fd5b9060005260206000209060020201600091509050806000018054610786906113d0565b80601f01602080910402602001604051908101604052809291908181526020018280546107b2906113d0565b80156107ff5780601f106107d4576101008083540402835291602001916107ff565b820191906000526020600020905b8154815290600101906020018083116107e257829003601f168201915b505050505090806001018054610814906113d0565b80601f0160208091040260200160405190810160405280929190818152602001828054610840906113d0565b801561088d5780601f106108625761010080835404028352916020019161088d565b820191906000526020600020905b81548152906001019060200180831161087057829003601f168201915b5050505050905082565b60608060606000606080600187815481106108b5576108b4611401565b5b9060005260206000209060060201600001600188815481106108da576108d9611401565b5b9060005260206000209060060201600101600189815481106108ff576108fe611401565b5b906000526020600020906006020160020160018a8154811061092457610923611401565b5b906000526020600020906006020160030160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1660018b8154811061096a57610969611401565b5b906000526020600020906006020160040160018c8154811061098f5761098e611401565b5b90600052602060002090600602016005018580546109ac906113d0565b80601f01602080910402602001604051908101604052809291908181526020018280546109d8906113d0565b8015610a255780601f106109fa57610100808354040283529160200191610a25565b820191906000526020600020905b815481529060010190602001808311610a0857829003601f168201915b50505050509550848054610a38906113d0565b80601f0160208091040260200160405190810160405280929190818152602001828054610a64906113d0565b8015610ab15780601f10610a8657610100808354040283529160200191610ab1565b820191906000526020600020905b815481529060010190602001808311610a9457829003601f168201915b50505050509450838054610ac4906113d0565b80601f0160208091040260200160405190810160405280929190818152602001828054610af0906113d0565b8015610b3d5780601f10610b1257610100808354040283529160200191610b3d565b820191906000526020600020905b815481529060010190602001808311610b2057829003601f168201915b5050505050935081805480602002602001604051908101604052809291908181526020018280548015610b8f57602002820191906000526020600020905b815481526020019060010190808311610b7b575b50505050509150808054610ba2906113d0565b80601f0160208091040260200160405190810160405280929190818152602001828054610bce906113d0565b8015610c1b5780601f10610bf057610100808354040283529160200191610c1b565b820191906000526020600020905b815481529060010190602001808311610bfe57829003601f168201915b5050505050905095509550955095509550955091939550919395565b600060405180604001604052808481526020018381525090806001815401808255809150506001900390600052602060002090600202016000909190919091506000820151816000019081610c8c91906115dc565b506020820151816001019081610ca291906115dc565b50505060018381548110610cb957610cb8611401565b5b90600052602060002090600602016004016001600080549050610cdc91906116dd565b9080600181540180825580915050600190039060005260206000200160009091909190915055505050565b6000600180549050905090565b600060018281548110610d2a57610d29611401565b5b9060005260206000209060060201600401805490509050919050565b828054828255906000526020600020908101928215610d82579160200282015b82811115610d81578251825591602001919060010190610d66565b5b509050610d8f9190610d93565b5090565b5b80821115610dac576000816000905550600101610d94565b5090565b6000604051905090565b600080fd5b600080fd5b6000819050919050565b610dd781610dc4565b8114610de257600080fd5b50565b600081359050610df481610dce565b92915050565b600060208284031215610e1057610e0f610dba565b5b6000610e1e84828501610de5565b91505092915050565b600081519050919050565b600082825260208201905092915050565b60005b83811015610e61578082015181840152602081019050610e46565b60008484015250505050565b6000601f19601f8301169050919050565b6000610e8982610e27565b610e938185610e32565b9350610ea3818560208601610e43565b610eac81610e6d565b840191505092915050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b6000610ee282610eb7565b9050919050565b610ef281610ed7565b82525050565b600060a0820190508181036000830152610f128188610e7e565b90508181036020830152610f268187610e7e565b90508181036040830152610f3a8186610e7e565b9050610f496060830185610ee9565b8181036080830152610f5b8184610e7e565b90509695505050505050565b60006040820190508181036000830152610f818185610e7e565b90508181036020830152610f958184610e7e565b90509392505050565b600080fd5b600080fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b610fe082610e6d565b810181811067ffffffffffffffff82111715610fff57610ffe610fa8565b5b80604052505050565b6000611012610db0565b905061101e8282610fd7565b919050565b600067ffffffffffffffff82111561103e5761103d610fa8565b5b61104782610e6d565b9050602081019050919050565b82818337600083830152505050565b600061107661107184611023565b611008565b90508281526020810184848401111561109257611091610fa3565b5b61109d848285611054565b509392505050565b600082601f8301126110ba576110b9610f9e565b5b81356110ca848260208601611063565b91505092915050565b600080600080608085870312156110ed576110ec610dba565b5b600085013567ffffffffffffffff81111561110b5761110a610dbf565b5b611117878288016110a5565b945050602085013567ffffffffffffffff81111561113857611137610dbf565b5b611144878288016110a5565b935050604085013567ffffffffffffffff81111561116557611164610dbf565b5b611171878288016110a5565b925050606085013567ffffffffffffffff81111561119257611191610dbf565b5b61119e878288016110a5565b91505092959194509250565b600081519050919050565b600082825260208201905092915050565b6000819050602082019050919050565b6111df81610dc4565b82525050565b60006111f183836111d6565b60208301905092915050565b6000602082019050919050565b6000611215826111aa565b61121f81856111b5565b935061122a836111c6565b8060005b8381101561125b57815161124288826111e5565b975061124d836111fd565b92505060018101905061122e565b5085935050505092915050565b600060c08201905081810360008301526112828189610e7e565b905081810360208301526112968188610e7e565b905081810360408301526112aa8187610e7e565b90506112b96060830186610ee9565b81810360808301526112cb818561120a565b905081810360a08301526112df8184610e7e565b9050979650505050505050565b60008060006060848603121561130557611304610dba565b5b600061131386828701610de5565b935050602084013567ffffffffffffffff81111561133457611333610dbf565b5b611340868287016110a5565b925050604084013567ffffffffffffffff81111561136157611360610dbf565b5b61136d868287016110a5565b9150509250925092565b61138081610dc4565b82525050565b600060208201905061139b6000830184611377565b92915050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b600060028204905060018216806113e857607f821691505b6020821081036113fb576113fa6113a1565b5b50919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b60008190508160005260206000209050919050565b60006020601f8301049050919050565b600082821b905092915050565b6000600883026114927fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff82611455565b61149c8683611455565b95508019841693508086168417925050509392505050565b6000819050919050565b60006114d96114d46114cf84610dc4565b6114b4565b610dc4565b9050919050565b6000819050919050565b6114f3836114be565b6115076114ff826114e0565b848454611462565b825550505050565b600090565b61151c61150f565b6115278184846114ea565b505050565b5b8181101561154b57611540600082611514565b60018101905061152d565b5050565b601f8211156115905761156181611430565b61156a84611445565b81016020851015611579578190505b61158d61158585611445565b83018261152c565b50505b505050565b600082821c905092915050565b60006115b360001984600802611595565b1980831691505092915050565b60006115cc83836115a2565b9150826002028217905092915050565b6115e582610e27565b67ffffffffffffffff8111156115fe576115fd610fa8565b5b61160882546113d0565b61161382828561154f565b600060209050601f8311600181146116465760008415611634578287015190505b61163e85826115c0565b8655506116a6565b601f19841661165486611430565b60005b8281101561167c57848901518255600182019150602085019450602081019050611657565b868310156116995784890151611695601f8916826115a2565b8355505b6001600288020188555050505b505050505050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b60006116e882610dc4565b91506116f383610dc4565b925082820390508181111561170b5761170a6116ae565b5b9291505056fea2646970667358221220acdbe9d0fc9abec13cd7b367d234253031c440c07cca931986299b221f87b08664736f6c63430008110033";

	protected static final HashMap<String, String> _addresses;

	static {
		_addresses = new HashMap<>();
	}

	protected MyContract(String contractAddress, Web3j web3j, TransactionManager transactionManager, BigInteger gasPrice, BigInteger gasLimit) {
		super(BINARY, contractAddress, web3j, transactionManager, gasPrice, gasLimit);
	}

	protected MyContract(String contractAddress, Web3j web3j, TransactionManager transactionManager, ContractGasProvider contractGasProvider) {
		super(BINARY, contractAddress, web3j, transactionManager, contractGasProvider);
	}

	public static RemoteCall<MyContract> deploy(Web3j web3j, TransactionManager transactionManager, BigInteger gasPrice, BigInteger gasLimit) {
		return deployRemoteCall(MyContract.class, web3j, transactionManager, gasPrice, gasLimit, BINARY, "");
	}

	public RemoteCall<TransactionReceipt> MyContractFunction() {
		final Function function = new Function(
			"MyContractFunction",
			Arrays.<Type>asList(),
			Collections.<TypeReference<?>>emptyList());
		return executeRemoteCallTransaction(function);
	}

	public static MyContract load(String contractAddress, Web3j web3j, TransactionManager transactionManager, BigInteger gasPrice, BigInteger gasLimit) {
		return new MyContract(contractAddress, web3j, transactionManager, gasPrice, gasLimit);
	}

	protected String getStaticDeployedAddress(String networkId) {
		return _addresses.get(networkId);
	}

	public static String getPreviouslyDeployedAddress(String networkId) {
		return _addresses.get(networkId);
	}
}
